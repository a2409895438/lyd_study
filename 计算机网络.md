# 计算机网络

### 1. OSI的七层模型分别是什么？各自的功能是什么？

#### 简要概括

- 物理层：负责在物理网络中传输数据帧
- 数据链路层：负责数据的封帧以及差错检测，以及MAC寻址
- 网络层：负责数据的路由、转发和分片
- 传输层：端到端传输数据的基本功能
- 会话层：控制应用程序之间的会话能力，如不同软件数据分发给不同的软件
- 表示层：数据格式表示
- 应用层：各种应用软件，包括Web应用

### 2. 三次握手

1. 第一次握手：客户端给服务器发送一个SYN报文
2. 第二次握手：服务端受到SYN报文后，应答一个SYN和ACK报文
3. 第三次握手：客户端受到SYN和ACK报文后，会回应一个ACK报文
4. 服务器受到ACK报文后，三次握手建立完成



​	第一次握手：服务端得到结论：客户端的发送能力和服务端的接受能力是正常的

​	第二次握手：客户端得到结论：服务端的接受和发送能力是正常的，客户端的发送和接受能力是正常的

​	第三次握手： 服务端得到结论： 服务端的接受和发送能力是正常的，客户端的发送和接受能力是正常的

> ​	为了实现可靠数据传输， TCP 协议的通信双方， 都必须维护一个序列号， 以标识发送出去的数据包中， 哪些是已经被对方收到的。 三次握手的过程即是通信双方相互告知序列号起始值， 并确认对方已经收到了序列号起始值的必经步骤
>
> ​	如果只是两次握手， 至多只有连接发起方的起始序列号能被确认， 另一方选择的序列号则得不到确认



### 3. 四次挥手

假如是客户端先发起关闭请求:

1. 第一次挥手：客户端发送一个FIN报文，报文中会指定一个序列号，此时客户端处于FIN_WAIT1状态
2. 第二次挥手：服务端收到 FIN 之后，会发送 ACK 报文，且把客户端的序列号值 + 1 作为 ACK 报文的序列值，表明已经收到客户端的报文了，此时服务端处于 **CLOSE_WAIT**状态。
3. 第三次挥手：如果服务端也想断开连接了，和客户端的第一次挥手一样，发给 FIN 报文，且指定一个序列号此时服务端处于 **LAST_ACK** 的状态。
4. 第四次挥手：客户端收到 FIN 之后，一样发送一个 ACK 报文作为应答，且把服务端的序列号值 + 1 作为自己 ACK 报文的序列号值，此时客户端处于 **TIME_WAIT** 状态。需要过一阵子以确保服务端收到自己的 ACK 报文之后才会进入 CLOSED 状态
5. 服务端收到 ACK 报文之后，就处于关闭连接了，处于 CLOSED 状态。

### 4. TCP和UDP的区别

